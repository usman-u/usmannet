kind: pipeline
type: docker
name: USMAN.NET CI/CD

steps:
- name: Dry Run
  image: python
  commands:
  - pip3 install -r requirements.txt
  - python3 dryrun.py

- name: Install Requirements and Deploy
  image: python
  commands:
  - pip3 install -r requirements.txt
  - python3 main.py
  when:
    branch:
    - main

# - name: Health Checks
#   image: python
#   commands:
#   - pip3 install -r requirements.txt
#   - python3 vyos_health_check.py
#   when:
#     branch:
#     - main



trigger:
  exclude:
    - pull_request